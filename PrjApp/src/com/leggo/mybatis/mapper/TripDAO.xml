<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.leggo.mybatis.ITripDAO">

	<select id="list" resultType="com.leggo.mybatis.TripDTO">
		SELECT TR_CD, MEM_NNM, TR_TT,  TO_CHAR(TR_DT, 'YYYY-MM-DD') AS TR_DT, TR_HITS, RPT_ST_CONT, CASE WHEN  RPT_ST_CONT IN('완료', '미완료', '처리중') THEN '블라인드'
				                                                                                     ELSE '정상'
				                                                                                     END BLIND
		FROM TRIPVIEW
		ORDER BY TR_CD DESC
	</select>
	
	<select id="count" resultType="java.lang.Integer">
		SELECT COUNT(*) AS COUNT
		FROM TRIPVIEW
	</select>
	
</mapper>
