<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.leggo.mybatis.IPlanDAO">

	<select id="list" resultType="com.leggo.mybatis.PlanDTO">
		SELECT PL_CD, MEM_NNM, PL_TT,  TO_CHAR(PL_DT, 'YYYY-MM-DD') AS DT, PL_DT, PL_HITS, RPT_ST_CONT, CASE WHEN  RPT_ST_CONT IN('완료', '미완료', '처리중') THEN '블라인드'
                                                                                     ELSE '정상'
                                                                                     END BLIND
		FROM PLANVIEW
		ORDER BY PL_DT DESC
	</select>
	
	<select id="count" resultType="java.lang.Integer">
		SELECT COUNT(*) AS COUNT
		FROM PLANVIEW
	</select>
	
</mapper>
